{% extends 'base.html' %}
{% load i18n %}
{% load static %}

{% block title %}{% trans "–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä" %} - Sneaker Shop{% endblock %}

{% block extra_css %}
<style>
    /* === –ú–ò–ù–ò–ú–ê–õ–ò–°–¢–ò–ß–ù–´–ô –î–ò–ó–ê–ô–ù === */
    :root {
        --primary-color: #000000;
        --secondary-color: #666666;
        --accent-color: #f5f5f5;
        --border-color: #e0e0e0;
        --text-primary: #000000;
        --text-secondary: #666666;
        --bg-white: #ffffff;
        --bg-light: #fafafa;
        --success-color: #28a745;
        --danger-color: #dc3545;
    }

    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        color: var(--text-primary);
        background-color: var(--bg-white);
        line-height: 1.6;
    }

    .main-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem 1rem;
    }

    .page-title {
        font-size: 2.5rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 2rem;
        text-align: center;
        letter-spacing: -0.02em;
    }

    /* === –ù–ê–í–ò–ì–ê–¶–ò–Ø === */
    .breadcrumb {
        background: transparent;
        padding: 0;
        margin-bottom: 2rem;
        font-size: 0.875rem;
    }

    .breadcrumb-item + .breadcrumb-item::before {
        content: "‚Ä∫";
        color: var(--text-secondary);
        margin: 0 0.5rem;
    }

    .breadcrumb-item a {
        color: var(--text-secondary);
        text-decoration: none;
    }

    .breadcrumb-item a:hover {
        color: var(--text-primary);
    }

    .breadcrumb-item.active {
        color: var(--text-primary);
        font-weight: 500;
    }

    /* === –§–û–†–ú–ê === */
    .form-container {
        background: var(--bg-white);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        padding: 2rem;
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-label {
        display: block;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
    }

    .form-control, .form-select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 1rem;
        transition: all 0.2s ease;
        background: var(--bg-white);
        color: var(--text-primary);
    }

    .form-control:focus, .form-select:focus {
        outline: none;
        border-color: var(--text-primary);
        box-shadow: 0 0 0 2px rgba(0,0,0,0.1);
    }

    .form-control.is-invalid {
        border-color: var(--danger-color);
    }

    .invalid-feedback {
        color: var(--danger-color);
        font-size: 0.875rem;
        margin-top: 0.25rem;
        display: block;
    }

    .form-help {
        font-size: 0.75rem;
        color: var(--text-secondary);
        margin-top: 0.25rem;
    }

    /* === –§–ê–ô–õ–û–í–´–ô –ò–ù–ü–£–¢ === */
    .file-input-container {
        position: relative;
        display: inline-block;
        width: 100%;
    }

    .file-input {
        position: absolute;
        opacity: 0;
        width: 100%;
        height: 100%;
        cursor: pointer;
    }

    .file-input-label {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 2rem;
        border: 2px dashed var(--border-color);
        border-radius: 4px;
        background: var(--bg-light);
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: center;
    }

    .file-input-label:hover {
        border-color: var(--text-primary);
        background: var(--accent-color);
        color: var(--text-primary);
    }

    .file-input-icon {
        font-size: 2rem;
    }

    .file-input-text {
        font-weight: 500;
    }

    /* === –ß–ï–ö–ë–û–ö–° === */
    .checkbox-container {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .checkbox-input {
        width: 1.25rem;
        height: 1.25rem;
        border: 2px solid var(--border-color);
        border-radius: 3px;
        background: var(--bg-white);
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .checkbox-input:checked {
        background: var(--text-primary);
        border-color: var(--text-primary);
    }

    .checkbox-label {
        font-weight: 500;
        color: var(--text-primary);
        cursor: pointer;
        margin: 0;
    }

    /* === –ö–ù–û–ü–ö–ò === */
    .btn {
        padding: 0.75rem 1.5rem;
        border-radius: 4px;
        font-size: 0.875rem;
        font-weight: 500;
        text-decoration: none;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s ease;
        border: 1px solid;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .btn-primary {
        background: var(--text-primary);
        color: var(--bg-white);
        border-color: var(--text-primary);
    }

    .btn-primary:hover {
        background: var(--secondary-color);
        border-color: var(--secondary-color);
        color: var(--bg-white);
    }

    .btn-secondary {
        background: transparent;
        color: var(--text-secondary);
        border-color: var(--border-color);
    }

    .btn-secondary:hover {
        background: var(--accent-color);
        color: var(--text-primary);
        border-color: var(--text-primary);
    }

    .form-actions {
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid var(--border-color);
    }

    /* === –ü–†–ï–í–¨–Æ –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø === */
    .image-preview {
        margin-top: 1rem;
        padding: 1rem;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        background: var(--bg-light);
        text-align: center;
        display: none;
    }

    .preview-image {
        max-width: 200px;
        max-height: 200px;
        border-radius: 4px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .preview-text {
        margin-top: 0.5rem;
        font-size: 0.875rem;
        color: var(--text-secondary);
    }

    /* === –°–û–û–ë–©–ï–ù–ò–Ø === */
    .alert {
        padding: 1rem;
        border-radius: 4px;
        margin-bottom: 1.5rem;
        border: 1px solid;
    }

    .alert-success {
        background: rgba(40, 167, 69, 0.1);
        color: var(--success-color);
        border-color: var(--success-color);
    }

    .alert-danger {
        background: rgba(220, 53, 69, 0.1);
        color: var(--danger-color);
        border-color: var(--danger-color);
    }

    /* === –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ === */
    @media (max-width: 768px) {
        .main-container {
            padding: 1rem;
        }
        
        .form-container {
            padding: 1.5rem;
        }
        
        .page-title {
            font-size: 2rem;
        }
        
        .form-actions {
            flex-direction: column;
        }
        
        .btn {
            width: 100%;
            justify-content: center;
        }

        .file-input-label {
            padding: 1.5rem;
        }

            /* === –°–¢–ò–õ–ò –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–Ø === */
        .form-switcher {
            background: var(--bg-light);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 1rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .switcher-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .switcher-buttons {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .switcher-btn {
            padding: 0.75rem 1.5rem;
            border: 1px solid var(--border-color);
            background: var(--bg-white);
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .switcher-btn:hover {
            background: var(--accent-color);
            color: var(--text-primary);
            border-color: var(--text-primary);
            text-decoration: none;
        }

        .switcher-btn.active {
            background: var(--text-primary);
            color: var(--bg-white);
            border-color: var(--text-primary);
        }

        .switcher-description {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
            font-style: italic;
        }

    }
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    const fileInput = document.getElementById('id_image');
    const imagePreview = document.getElementById('image-preview');
    const previewImage = document.getElementById('preview-image');
    const previewText = document.getElementById('preview-text');

    if (fileInput) {
        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                    previewText.textContent = file.name;
                    imagePreview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            } else {
                imagePreview.style.display = 'none';
            }
        });
    }

    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
    const form = document.querySelector('form');
    const priceInput = document.querySelector('input[name="price"]');
    const brandInput = document.querySelector('input[name="brand"]');

    if (priceInput) {
        priceInput.addEventListener('input', function() {
            const value = parseFloat(this.value);
            if (value <= 0) {
                this.classList.add('is-invalid');
                showFieldError(this, '–¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è');
            } else {
                this.classList.remove('is-invalid');
                hideFieldError(this);
            }
        });
    }

    if (brandInput) {
        brandInput.addEventListener('input', function() {
            if (this.value.trim().length < 2) {
                this.classList.add('is-invalid');
                showFieldError(this, '–ù–∞–∑–≤–∞–Ω–∏–µ –±—Ä–µ–Ω–¥–∞ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞');
            } else {
                this.classList.remove('is-invalid');
                hideFieldError(this);
            }
        });
    }

    function showFieldError(field, message) {
        let errorDiv = field.parentNode.querySelector('.invalid-feedback');
        if (!errorDiv) {
            errorDiv = document.createElement('div');
            errorDiv.className = 'invalid-feedback';
            field.parentNode.appendChild(errorDiv);
        }
        errorDiv.textContent = message;
    }

    function hideFieldError(field) {
        const errorDiv = field.parentNode.querySelector('.invalid-feedback');
        if (errorDiv) {
            errorDiv.remove();
        }
    }
});
</script>
{% endblock %}

{% block content %}
<div class="main-container">
    <!-- === –ù–ê–í–ò–ì–ê–¶–ò–Ø === -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'home' %}">{% trans "–ì–ª–∞–≤–Ω–∞—è" %}</a></li>
            <li class="breadcrumb-item"><a href="{% url 'product_list' %}">{% trans "–¢–æ–≤–∞—Ä—ã" %}</a></li>
            <li class="breadcrumb-item active">{% trans "–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä" %}</li>
        </ol>
    </nav>

    <!-- ‚úÖ –î–û–ë–ê–í–õ–Ø–ï–ú –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Æ DJANGO FIELD –ú–ï–¢–û–î–û–í -->
    {% if form_type == 'django_fields' %}
    <div class="form-switcher">
        <div class="switcher-title">üîç Django Field –º–µ—Ç–æ–¥—ã –≤ –¥–µ–π—Å—Ç–≤–∏–∏</div>
        <div class="switcher-description">
            –≠—Ç–∞ —Ñ–æ—Ä–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ field.label_tag, field, field.errors
        </div>
    </div>

    <div class="form-container">
        <h3 style="margin-bottom: 1.5rem;">üìã –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤:</h3>
        <div style="background: var(--bg-light); padding: 1rem; border-radius: 4px; margin-bottom: 2rem; font-size: 0.9rem;">
            {% for method in demo_info.methods %}
                <div style="margin-bottom: 0.5rem;">‚Ä¢ {{ method }}</div>
            {% endfor %}
        </div>

        <form method="post" enctype="multipart/form-data" novalidate>
            {% csrf_token %}
            
            <!-- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Django field –º–µ—Ç–æ–¥–æ–≤ -->
            {% for field in form %}
                <div class="form-group">
                    <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–¥ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç -->
                    <div style="background: #f8f9fa; padding: 0.5rem; border-radius: 4px; margin-bottom: 0.5rem; font-family: monospace; font-size: 0.8rem;">
                        {% verbatim %}{{ field.label_tag }}{% endverbatim %}
                    </div>
                    {{ field.label_tag }}
                    
                    <div style="background: #f8f9fa; padding: 0.5rem; border-radius: 4px; margin-bottom: 0.5rem; font-family: monospace; font-size: 0.8rem;">
                        {% verbatim %}{{ field }}{% endverbatim %}
                    </div>
                    {{ field }}
                    
                    {% if field.help_text %}
                        <div class="form-help">{{ field.help_text }}</div>
                    {% endif %}
                    
                    {% if field.errors %}
                        <div style="background: #f8f9fa; padding: 0.5rem; border-radius: 4px; margin-bottom: 0.5rem; font-family: monospace; font-size: 0.8rem;">
                            {% verbatim %}{{ field.errors }}{% endverbatim %}
                        </div>
                        <div class="invalid-feedback" style="display: block;">
                            {{ field.errors }}
                        </div>
                    {% endif %}
                </div>
            {% endfor %}

            <!-- –û–±—â–∏–µ –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º—ã -->
            {% if form.non_field_errors %}
                <div class="alert alert-danger">
                    {% for error in form.non_field_errors %}
                        {{ error }}
                    {% endfor %}
                </div>
            {% endif %}

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="form-actions">
                <a href="{% url 'product_list' %}" class="btn btn-secondary">
                    ‚Üê {% trans "–û—Ç–º–µ–Ω–∞" %}
                </a>
                <button type="submit" class="btn btn-primary">
                    üíæ {% trans "–°–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ Django Fields" %}
                </button>
            </div>
        </form>
    </div>
    {% endif %}
    
    <!-- ‚úÖ –û–ë–ù–û–í–õ–Ø–ï–ú –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ –§–û–†–ú -->
    {% if form_type != 'django_fields' %}
    <div class="form-switcher">
        <div class="switcher-title">üîÑ {% trans "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ñ–æ—Ä–º—ã" %}</div>
        <div class="switcher-buttons">
            <a href="{% url 'product_create' %}" class="switcher-btn {% if form_type != 'django' %}active{% endif %}">
                üé® {% trans "–ö–∞—Å—Ç–æ–º–Ω–∞—è —Ñ–æ—Ä–º–∞" %}
            </a>
            <a href="{% url 'product_create_django_form' %}" class="switcher-btn {% if form_type == 'django' %}active{% endif %}">
                üèóÔ∏è {% trans "Django —Ñ–æ—Ä–º–∞" %}
            </a>
            <a href="{% url 'product_create_django_fields' %}" class="switcher-btn">
                üîç Django Field –º–µ—Ç–æ–¥—ã
            </a>
        </div>
        <div class="switcher-description">
            {% trans "–ö–∞—Å—Ç–æ–º–Ω–∞—è | Django —Ñ–æ—Ä–º–∞ | Django Field –º–µ—Ç–æ–¥—ã" %}
        </div>
    </div>
    {% endif %}


    <h1 class="page-title">
        ‚ûï {% trans "–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä" %}
    </h1>

    <!-- === –°–û–û–ë–©–ï–ù–ò–Ø === -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <div class="form-container">
        <form method="post" enctype="multipart/form-data" novalidate>
            {% csrf_token %}
            
            <!-- –ë—Ä–µ–Ω–¥ -->
            <div class="form-group">
                <label for="id_brand" class="form-label">
                    {% trans "–ë—Ä–µ–Ω–¥" %} *
                </label>
                <input 
                    type="text" 
                    name="brand" 
                    class="form-control{% if form.brand.errors %} is-invalid{% endif %}" 
                    id="id_brand" 
                    value="{{ form.brand.value|default:'' }}"
                    required
                    placeholder="{% trans '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±—Ä–µ–Ω–¥–∞' %}"
                >
                {% if form.brand.errors %}
                    <div class="invalid-feedback">{{ form.brand.errors.0 }}</div>
                {% endif %}
                <div class="form-help">{% trans "–ù–∞–ø—Ä–∏–º–µ—Ä: Nike, Adidas, Puma" %}</div>
            </div>

            <!-- –¶–µ–Ω–∞ -->
            <div class="form-group">
                <label for="id_price" class="form-label">
                    {% trans "–¶–µ–Ω–∞" %} *
                </label>
                <input 
                    type="number" 
                    name="price" 
                    class="form-control{% if form.price.errors %} is-invalid{% endif %}" 
                    id="id_price" 
                    step="0.01" 
                    min="0.01"
                    value="{{ form.price.value|default:'' }}"
                    required
                    placeholder="{% trans '–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É –≤ —Ä—É–±–ª—è—Ö' %}"
                >
                {% if form.price.errors %}
                    <div class="invalid-feedback">{{ form.price.errors.0 }}</div>
                {% endif %}
                <div class="form-help">{% trans "–¶–µ–Ω–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ä—É–±–ª—è—Ö" %}</div>
            </div>

            <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
            <div class="form-group">
                <label for="id_image" class="form-label">
                    {% trans "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" %}
                </label>
                <div class="file-input-container">
                    <input 
                        type="file" 
                        name="image" 
                        class="file-input" 
                        id="id_image"
                        accept="image/*"
                    >
                    <label for="id_image" class="file-input-label">
                        <span class="file-input-icon">üì∑</span>
                        <div>
                            <div class="file-input-text">{% trans "–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" %}</div>
                            <div class="form-help">{% trans "JPG, PNG, GIF –¥–æ 5MB" %}</div>
                        </div>
                    </label>
                </div>
                {% if form.image.errors %}
                    <div class="invalid-feedback">{{ form.image.errors.0 }}</div>
                {% endif %}
                
                <!-- –ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
                <div id="image-preview" class="image-preview">
                    <img id="preview-image" class="preview-image" alt="{% trans '–ü—Ä–µ–≤—å—é' %}">
                    <div id="preview-text" class="preview-text"></div>
                </div>
            </div>

            <!-- –°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
            <div class="form-group">
                <div class="checkbox-container">
                    <input 
                        type="checkbox" 
                        name="is_active" 
                        class="checkbox-input" 
                        id="id_is_active"
                        {% if form.is_active.value %}checked{% endif %}
                    >
                    <label for="id_is_active" class="checkbox-label">
                        {% trans "–¢–æ–≤–∞—Ä –∞–∫—Ç–∏–≤–µ–Ω (–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∑–∞–∫–∞–∑–∞)" %}
                    </label>
                </div>
                {% if form.is_active.errors %}
                    <div class="invalid-feedback">{{ form.is_active.errors.0 }}</div>
                {% endif %}
                <div class="form-help">{% trans "–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ" %}</div>
            </div>

            <!-- –û–±—â–∏–µ –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º—ã -->
            {% if form.non_field_errors %}
                <div class="alert alert-danger">
                    {% for error in form.non_field_errors %}
                        {{ error }}
                    {% endfor %}
                </div>
            {% endif %}

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="form-actions">
                <a href="{% url 'product_list' %}" class="btn btn-secondary">
                    ‚Üê {% trans "–û—Ç–º–µ–Ω–∞" %}
                </a>
                <button type="submit" class="btn btn-primary">
                    üíæ {% trans "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–≤–∞—Ä" %}
                </button>
            </div>
        </form>
    </div>

    <!-- === –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø === -->
    <div class="info-section">
        <h3 class="section-subtitle">
            üí° {% trans "–ü–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" %}
        </h3>
        
        <div class="info-grid">
            <div class="info-item">
                <h4>{% trans "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º" %}</h4>
                <ul>
                    <li>{% trans "–§–æ—Ä–º–∞—Ç—ã: JPG, PNG, GIF" %}</li>
                    <li>{% trans "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB" %}</li>
                    <li>{% trans "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ: 800x600px" %}</li>
                    <li>{% trans "–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω: 4:3 –∏–ª–∏ 16:9" %}</li>
                </ul>
            </div>
            
            <div class="info-item">
                <h4>{% trans "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –±—Ä–µ–Ω–¥–∞" %}</h4>
                <ul>
                    <li>{% trans "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" %}</li>
                    <li>{% trans "–°–æ–±–ª—é–¥–∞–π—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä –±—É–∫–≤" %}</li>
                    <li>{% trans "–ò–∑–±–µ–≥–∞–π—Ç–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π" %}</li>
                    <li>{% trans "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏–µ" %}</li>
                </ul>
            </div>
            
            <div class="info-item">
                <h4>{% trans "–¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ" %}</h4>
                <ul>
                    <li>{% trans "–£–∫–∞–∑—ã–≤–∞–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã" %}</li>
                    <li>{% trans "–£—á–∏—Ç—ã–≤–∞–π—Ç–µ —Ä—ã–Ω–æ—á–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å" %}</li>
                    <li>{% trans "–¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è" %}</li>
                    <li>{% trans "–ú–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ø–µ–π–∫–∏" %}</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
    /* === –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –°–¢–ò–õ–ò === */
    .info-section {
        background: var(--bg-light);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        padding: 2rem;
        margin-top: 2rem;
    }

    .section-subtitle {
        font-size: 1.25rem;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
    }

    .info-item h4 {
        font-size: 1rem;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 1rem;
    }

    .info-item ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .info-item li {
        padding: 0.5rem 0;
        color: var(--text-secondary);
        font-size: 0.875rem;
        position: relative;
        padding-left: 1.5rem;
    }

    .info-item li::before {
        content: "‚úì";
        position: absolute;
        left: 0;
        color: var(--success-color);
        font-weight: bold;
    }

    /* === –ê–ù–ò–ú–ê–¶–ò–ò === */
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .image-preview {
        animation: fadeIn 0.3s ease;
    }

    .form-container {
        animation: fadeIn 0.5s ease;
    }

    /* === –°–û–°–¢–û–Ø–ù–ò–Ø –ó–ê–ì–†–£–ó–ö–ò === */
    .btn-primary:disabled {
        background: var(--secondary-color);
        border-color: var(--secondary-color);
        cursor: not-allowed;
        opacity: 0.6;
    }

    .loading {
        position: relative;
        pointer-events: none;
    }

    .loading::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 20px;
        height: 20px;
        margin: -10px 0 0 -10px;
        border: 2px solid transparent;
        border-top: 2px solid var(--bg-white);
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    /* === –£–õ–£–ß–®–ï–ù–ù–ê–Ø –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ === */
    @media (max-width: 480px) {
        .info-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        .file-input-label {
            padding: 1rem;
        }
        
        .file-input-icon {
            font-size: 1.5rem;
        }
        
        .page-title {
            font-size: 1.75rem;
        }
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
    const form = document.querySelector('form');
    const submitBtn = form.querySelector('button[type="submit"]');
    
    form.addEventListener('submit', function(e) {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
        submitBtn.classList.add('loading');
        submitBtn.disabled = true;
        
        // –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–∞, —É–±–∏—Ä–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
        if (!form.checkValidity()) {
            e.preventDefault();
            submitBtn.classList.remove('loading');
            submitBtn.disabled = false;
        }
    });

    // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
    const inputs = form.querySelectorAll('input[type="text"], input[type="number"], textarea');
    inputs.forEach(input => {
        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ localStorage
        const savedValue = localStorage.getItem(`product_form_${input.name}`);
        if (savedValue && !input.value) {
            input.value = savedValue;
        }

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
        input.addEventListener('input', function() {
            localStorage.setItem(`product_form_${input.name}`, this.value);
        });
    });

    // –û—á–∏—â–∞–µ–º localStorage –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
    form.addEventListener('submit', function() {
        inputs.forEach(input => {
            localStorage.removeItem(`product_form_${input.name}`);
        });
    });

    // Drag & Drop –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    const fileInputLabel = document.querySelector('.file-input-label');
    const fileInput = document.getElementById('id_image');

    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        fileInputLabel.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }

    ['dragenter', 'dragover'].forEach(eventName => {
        fileInputLabel.addEventListener(eventName, highlight, false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
        fileInputLabel.addEventListener(eventName, unhighlight, false);
    });

    function highlight() {
        fileInputLabel.style.borderColor = 'var(--text-primary)';
        fileInputLabel.style.background = 'var(--accent-color)';
    }

    function unhighlight() {
        fileInputLabel.style.borderColor = 'var(--border-color)';
        fileInputLabel.style.background = 'var(--bg-light)';
    }

    fileInputLabel.addEventListener('drop', handleDrop, false);

    function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        
        if (files.length > 0) {
            fileInput.files = files;
            fileInput.dispatchEvent(new Event('change'));
        }
    }
});
</script>
{% endblock %}
