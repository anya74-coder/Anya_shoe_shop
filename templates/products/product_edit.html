{% extends 'base.html' %}
{% load i18n %}
{% load static %}

{% block title %}{% trans "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä" %} - {{ product.brand }} - Sneaker Shop{% endblock %}

{% block extra_css %}
<style>
    /* === –ú–ò–ù–ò–ú–ê–õ–ò–°–¢–ò–ß–ù–´–ô –î–ò–ó–ê–ô–ù === */
    :root {
        --primary-color: #000000;
        --secondary-color: #666666;
        --accent-color: #f5f5f5;
        --border-color: #e0e0e0;
        --text-primary: #000000;
        --text-secondary: #666666;
        --bg-white: #ffffff;
        --bg-light: #fafafa;
        --success-color: #28a745;
        --danger-color: #dc3545;
        --warning-color: #ffc107;
    }

    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        color: var(--text-primary);
        background-color: var(--bg-white);
        line-height: 1.6;
    }

    .main-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem 1rem;
    }

    .page-title {
        font-size: 2.5rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 2rem;
        text-align: center;
        letter-spacing: -0.02em;
    }

    /* === –ù–ê–í–ò–ì–ê–¶–ò–Ø === */
    .breadcrumb {
        background: transparent;
        padding: 0;
        margin-bottom: 2rem;
        font-size: 0.875rem;
    }

    .breadcrumb-item + .breadcrumb-item::before {
        content: "‚Ä∫";
        color: var(--text-secondary);
        margin: 0 0.5rem;
    }

    .breadcrumb-item a {
        color: var(--text-secondary);
        text-decoration: none;
    }

    .breadcrumb-item a:hover {
        color: var(--text-primary);
    }

    .breadcrumb-item.active {
        color: var(--text-primary);
        font-weight: 500;
    }

    /* === –ò–ù–§–û–†–ú–ê–¶–ò–û–ù–ù–ê–Ø –ü–ê–ù–ï–õ–¨ === */
    .product-info-panel {
        background: var(--bg-light);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        padding: 1.5rem;
        margin-bottom: 2rem;
    }

    .info-title {
        font-size: 1.125rem;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
    }

    .info-item {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
    }

    .info-label {
        font-size: 0.75rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        font-weight: 500;
    }

    .info-value {
        font-size: 0.875rem;
        color: var(--text-primary);
        font-weight: 500;
    }

    .status-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        padding: 0.25rem 0.5rem;
        border-radius: 3px;
        font-size: 0.75rem;
        font-weight: 500;
    }

    .status-active {
        background: rgba(40, 167, 69, 0.1);
        color: var(--success-color);
    }

    .status-inactive {
        background: rgba(220, 53, 69, 0.1);
        color: var(--danger-color);
    }

    /* === –§–û–†–ú–ê === */
    .form-container {
        background: var(--bg-white);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        padding: 2rem;
        margin-bottom: 2rem;
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-label {
        display: block;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
    }

    .required {
        color: var(--danger-color);
    }

    .form-control, .form-select {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--border-color);
        border-radius: 4px;
        font-size: 1rem;
        transition: all 0.2s ease;
        background: var(--bg-white);
        color: var(--text-primary);
    }

    .form-control:focus, .form-select:focus {
        outline: none;
        border-color: var(--text-primary);
        box-shadow: 0 0 0 2px rgba(0,0,0,0.1);
    }

    .form-control.is-invalid {
        border-color: var(--danger-color);
    }

    .invalid-feedback {
        color: var(--danger-color);
        font-size: 0.875rem;
        margin-top: 0.25rem;
        display: block;
    }

    .form-help {
        font-size: 0.75rem;
        color: var(--text-secondary);
        margin-top: 0.25rem;
    }

    /* === –¢–ï–ö–£–©–ï–ï –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï === */
    .current-image-container {
        background: var(--bg-light);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        padding: 1.5rem;
        text-align: center;
        margin-bottom: 1rem;
    }

    .current-image-title {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 1rem;
    }

    .current-image {
        max-width: 200px;
        max-height: 200px;
        border-radius: 4px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        border: 1px solid var(--border-color);
    }

    /* === –§–ê–ô–õ–û–í–´–ô –ò–ù–ü–£–¢ === */
    .file-input-container {
        position: relative;
        display: inline-block;
        width: 100%;
    }

    .file-input {
        position: absolute;
        opacity: 0;
        width: 100%;
        height: 100%;
        cursor: pointer;
    }

    .file-input-label {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 2rem;
        border: 2px dashed var(--border-color);
        border-radius: 4px;
        background: var(--bg-light);
        color: var(--text-secondary);
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: center;
    }

    .file-input-label:hover {
        border-color: var(--text-primary);
        background: var(--accent-color);
        color: var(--text-primary);
    }

    .file-input-icon {
        font-size: 2rem;
    }

    .file-input-text {
        font-weight: 500;
    }

    /* === –ß–ï–ö–ë–û–ö–° === */
    .checkbox-container {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .checkbox-input {
        width: 1.25rem;
        height: 1.25rem;
        border: 2px solid var(--border-color);
        border-radius: 3px;
        background: var(--bg-white);
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .checkbox-input:checked {
        background: var(--text-primary);
        border-color: var(--text-primary);
    }

    .checkbox-label {
        font-weight: 500;
        color: var(--text-primary);
        cursor: pointer;
        margin: 0;
    }

    /* === –ö–ù–û–ü–ö–ò === */
    .btn {
        padding: 0.75rem 1.5rem;
        border-radius: 4px;
        font-size: 0.875rem;
        font-weight: 500;
        text-decoration: none;
        text-align: center;
        cursor: pointer;
        transition: all 0.2s ease;
        border: 1px solid;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .btn-primary {
        background: var(--text-primary);
        color: var(--bg-white);
        border-color: var(--text-primary);
    }

    .btn-primary:hover {
        background: var(--secondary-color);
        border-color: var(--secondary-color);
        color: var(--bg-white);
        transform: translateY(-1px);
    }

    .btn-secondary {
        background: transparent;
        color: var(--text-secondary);
        border-color: var(--border-color);
    }

    .btn-secondary:hover {
        background: var(--accent-color);
        color: var(--text-primary);
        border-color: var(--text-primary);
    }

    .btn-danger {
        background: var(--danger-color);
        color: var(--bg-white);
        border-color: var(--danger-color);
    }

    .btn-danger:hover {
        background: #c82333;
        border-color: #c82333;
        color: var(--bg-white);
    }

    .form-actions {
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid var(--border-color);
    }

    /* === –°–û–û–ë–©–ï–ù–ò–Ø === */
    .alert {
        padding: 1rem;
        border-radius: 4px;
        margin-bottom: 1.5rem;
        border: 1px solid;
    }

    .alert-success {
        background: rgba(40, 167, 69, 0.1);
        color: var(--success-color);
        border-color: var(--success-color);
    }

    .alert-danger {
        background: rgba(220, 53, 69, 0.1);
        color: var(--danger-color);
        border-color: var(--danger-color);
    }

    .alert-warning {
        background: rgba(255, 193, 7, 0.1);
        color: var(--warning-color);
        border-color: var(--warning-color);
    }

    /* === –ü–û–î–°–ö–ê–ó–ö–ò === */
    .tips-section {
        background: var(--bg-light);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        padding: 2rem;
        margin-top: 2rem;
    }

    .tips-title {
        font-size: 1.125rem;
        font-weight: 500;
        color: var(--text-primary);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .tips-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .tips-list li {
        padding: 0.5rem 0;
        color: var(--text-secondary);
        font-size: 0.875rem;
        position: relative;
        padding-left: 1.5rem;
    }

    .tips-list li::before {
        content: "üí°";
        position: absolute;
        left: 0;
        font-size: 1rem;
    }

    /* === –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ === */
    @media (max-width: 768px) {
        .main-container {
            padding: 1rem;
        }
        
        .form-container {
            padding: 1.5rem;
        }
        
        .page-title {
            font-size: 2rem;
        }
        
        .form-actions {
            flex-direction: column;
        }
        
        .btn {
            width: 100%;
            justify-content: center;
        }

        .file-input-label {
            padding: 1.5rem;
        }

        .info-grid {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 480px) {
        .page-title {
            font-size: 1.75rem;
        }
        
        .product-info-panel,
        .form-container,
        .tips-section {
            padding: 1rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="main-container">
    <!-- === –ù–ê–í–ò–ì–ê–¶–ò–Ø === -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'home' %}">{% trans "–ì–ª–∞–≤–Ω–∞—è" %}</a></li>
            <li class="breadcrumb-item"><a href="{% url 'product_list' %}">{% trans "–¢–æ–≤–∞—Ä—ã" %}</a></li>
            <li class="breadcrumb-item"><a href="{% url 'product_detail' product.sneakers_id %}">{{ product.brand }}</a></li>
            <li class="breadcrumb-item active">{% trans "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" %}</li>
        </ol>
    </nav>

    <h1 class="page-title">
        ‚úèÔ∏è {% trans "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä" %}
    </h1>

    <!-- === –°–û–û–ë–©–ï–ù–ò–Ø === -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <!-- === –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –¢–û–í–ê–†–ï === -->
    <div class="product-info-panel">
        <div class="info-title">
            üìã {% trans "–¢–µ–∫—É—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ" %}
        </div>
        <div class="info-grid">
            <div class="info-item">
                                <div class="info-value">#{{ product.sneakers_id }}</div>
            </div>
            <div class="info-item">
                <div class="info-label">{% trans "–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è" %}</div>
                <div class="info-value">{{ product.created_at|date:"d.m.Y H:i" }}</div>
            </div>
            <div class="info-item">
                <div class="info-label">{% trans "–°—Ç–∞—Ç—É—Å" %}</div>
                <div class="info-value">
                    {% if product.is_active %}
                        <span class="status-badge status-active">‚úÖ {% trans "–ê–∫—Ç–∏–≤–µ–Ω" %}</span>
                    {% else %}
                        <span class="status-badge status-inactive">‚ùå {% trans "–ù–µ–∞–∫—Ç–∏–≤–µ–Ω" %}</span>
                    {% endif %}
                </div>
            </div>
            <div class="info-item">
                <div class="info-label">{% trans "–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞" %}</div>
                <div class="info-value">{{ product.price|floatformat:0 }} ‚ÇΩ</div>
            </div>
        </div>
    </div>

    <!-- === –§–û–†–ú–ê –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø === -->
    <div class="form-container">
        <form method="post" enctype="multipart/form-data" novalidate>
            {% csrf_token %}
            
            <!-- –ë—Ä–µ–Ω–¥ -->
            <div class="form-group">
                <label for="id_brand" class="form-label">
                    {% trans "–ë—Ä–µ–Ω–¥" %} <span class="required">*</span>
                </label>
                <input 
                    type="text" 
                    name="brand" 
                    class="form-control" 
                    id="id_brand" 
                    value="{{ product.brand }}"
                    required
                    placeholder="{% trans '–ù–∞–ø—Ä–∏–º–µ—Ä: Nike, Adidas, Puma...' %}"
                >
                <div class="form-help">{% trans "–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±—Ä–µ–Ω–¥–∞" %}</div>
            </div>

            <!-- –¶–µ–Ω–∞ -->
            <div class="form-group">
                <label for="id_price" class="form-label">
                    {% trans "–¶–µ–Ω–∞" %} <span class="required">*</span>
                </label>
                <input 
                    type="number" 
                    name="price" 
                    class="form-control" 
                    id="id_price" 
                    step="0.01" 
                    min="0.01"
                    value="{{ product.price }}"
                    required
                    placeholder="{% trans '–¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö' %}"
                >
                <div class="form-help">{% trans "–¶–µ–Ω–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ä—É–±–ª—è—Ö" %}</div>
            </div>

            <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
            <div class="form-group">
                <label for="id_image" class="form-label">
                    {% trans "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" %}
                </label>
                
                {% if product.image %}
                    <div class="current-image-container">
                        <div class="current-image-title">{% trans "–¢–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" %}</div>
                        <img src="{{ product.image.url }}" alt="{{ product.brand }}" class="current-image">
                    </div>
                {% endif %}
                
                <div class="file-input-container">
                    <input 
                        type="file" 
                        name="image" 
                        class="file-input" 
                        id="id_image"
                        accept="image/*"
                    >
                    <label for="id_image" class="file-input-label">
                        <span class="file-input-icon">üì∑</span>
                        <div>
                            <div class="file-input-text">
                                {% if product.image %}
                                    {% trans "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" %}
                                {% else %}
                                    {% trans "–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" %}
                                {% endif %}
                            </div>
                            <div class="form-help">{% trans "JPG, PNG, GIF –¥–æ 5MB" %}</div>
                        </div>
                    </label>
                </div>
                {% if product.image %}
                    <div class="form-help">{% trans "–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∑–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–µ–µ" %}</div>
                {% else %}
                    <div class="form-help">{% trans "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, GIF. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5MB" %}</div>
                {% endif %}
            </div>

            <!-- –°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ -->
            <div class="form-group">
                <div class="checkbox-container">
                    <input 
                        type="checkbox" 
                        name="is_active" 
                        class="checkbox-input" 
                        id="id_is_active"
                        {% if product.is_active %}checked{% endif %}
                    >
                    <label for="id_is_active" class="checkbox-label">
                        {% trans "–¢–æ–≤–∞—Ä –∞–∫—Ç–∏–≤–µ–Ω (–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∑–∞–∫–∞–∑–∞)" %}
                    </label>
                </div>
                <div class="form-help">{% trans "–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ" %}</div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="form-actions">
                <a href="{% url 'product_detail' product.sneakers_id %}" class="btn btn-secondary">
                    ‚Üê {% trans "–û—Ç–º–µ–Ω–∞" %}
                </a>
                <button type="submit" class="btn btn-primary">
                    ‚úÖ {% trans "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è" %}
                </button>
            </div>
        </form>
    </div>

    <!-- === –ü–û–î–°–ö–ê–ó–ö–ò === -->
    <div class="tips-section">
        <div class="tips-title">
            üí° {% trans "–ü–æ–ª–µ–∑–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏" %}
        </div>
        <ul class="tips-list">
            <li>{% trans "–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø—è—Ç –≤ —Å–∏–ª—É —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è" %}</li>
            <li>{% trans "–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ä–æ–µ –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω–æ" %}</li>
            <li>{% trans "–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã —Å–∫—Ä—ã—Ç—ã –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –≤ –∫–∞—Ç–∞–ª–æ–≥–µ" %}</li>
            <li>{% trans "–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–≤–∞—Ä–∞" %}</li>
            <li>{% trans "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–∏ 4:3 –∏–ª–∏ 16:9" %}</li>
        </ul>
    </div>
</div>
{% endblock %}

